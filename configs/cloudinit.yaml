#cloud-config

# create the docker group
groups:
  - docker

# users
users:
  - name: htkoca
    groups: 
      - sudo
      - docker
    sudo: 
      - 'ALL=(ALL) NOPASSWD:ALL'
    passwd: <hash via 'mkpasswd --method=SHA-512 --rounds=4096'>
    ssh_authorized_keys:
      - <ssh pub key 1>

# Install env
runcmd:
  - deluser --remove-home ubuntu
  - sed -i -r -e '/^#?Port/s/^.*$/Port 8022/' /etc/ssh/sshd_config
  - sed -i -r -e '/^#?ListenAddress 0.0.0.0/s/^.*$/ListenAddress 0.0.0.0/' /etc/ssh/sshd_config
  - systemctl restart sshd
